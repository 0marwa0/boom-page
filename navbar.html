<div class="modal" id="myModal">
    <div class="modal-content">
        <div style="text-align: center;">
            <svg width="54" height="40" viewBox="0 0 54 40" xmlns="http://www.w3.org/2000/svg">
                <path d="M48.889 0H4.444A4.449 4.449 0 0 0 0 4.444v31.112A4.449 4.449 0 0 0 4.444 40H48.89a4.449 4.449 0 0 0 4.444-4.444V4.444A4.449 4.449 0 0 0 48.89 0zM4.444 2.222H48.89c.164 0 .308.06.462.094-3.848 3.521-16.607 15.193-21.072 19.216-.35.315-.912.69-1.612.69-.7 0-1.263-.375-1.614-.691C20.59 17.509 7.83 5.836 3.983 2.316c.153-.034.298-.094.461-.094zM2.222 35.556V4.444c0-.217.066-.415.125-.614a9065.333 9065.333 0 0 0 17.62 16.09C14.213 24.861 5.308 33.303 2.34 36.134c-.053-.19-.118-.374-.118-.58zm46.667 2.222H4.444c-.177 0-.335-.062-.5-.102 3.067-2.924 12.028-11.415 17.68-16.25.738.668 1.41 1.277 1.942 1.755.915.827 1.987 1.263 3.1 1.263 1.114 0 2.186-.436 3.1-1.261.532-.479 1.205-1.089 1.942-1.758 5.653 4.836 14.614 13.326 17.682 16.251-.166.04-.323.102-.501.102zm2.222-2.222c0 .205-.065.39-.117.579-2.97-2.832-11.873-11.274-17.627-16.216A8954.663 8954.663 0 0 0 50.987 3.83c.059.2.124.397.124.614v31.112z" fill="#825EF6" fill-rule="nonzero"/>
            </svg>
            <div class="contact-title text-center">
                Contact US!
            </div>
        </div>
        <div class="modal-body p-0">
            <form>
                <div class="text-left">
                    <p class="m-0">Your Name</p>
                    <input id="nameInput" type="text" placeholder="Type name" class="input-style"/>
                </div>
                <div class="text-left">
                    <div class="d-flex justify-content-between">
                        <p class="m-0">Email Address</p>
                        <div id="emailError" style="color: #e81d1d;"></div>
                    </div>
                    <input id="emailInput" type="text" placeholder="Type email" class="input-style"/>
                </div>
                <div class="text-left">
                    <p class="m-0">Message</p>
                    <textarea id="w3review" name="w3review" rows="4" cols="50" placeholder="Type here" class="input-style-textarea"></textarea>
                </div>
            </form>
            <div class="col p-0">
                <button id="sendButton" class="btn contact-btn primary-btn main-bg white full-width">
                    Send Message
                </button>
                <button type="button" class="close btn my-0 primary-btn main-border main-color full-width" data-dismiss="modal" aria-label="Close">
                    Close Window
                </button>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="sentModal">
    <div class="modal-content">
        <div style="text-align: center;">
            <svg width="54" height="40" viewBox="0 0 54 40" xmlns="http://www.w3.org/2000/svg">
                <path d="M48.889 0H4.444A4.449 4.449 0 0 0 0 4.444v31.112A4.449 4.449 0 0 0 4.444 40H48.89a4.449 4.449 0 0 0 4.444-4.444V4.444A4.449 4.449 0 0 0 48.89 0zM4.444 2.222H48.89c.164 0 .308.06.462.094-3.848 3.521-16.607 15.193-21.072 19.216-.35.315-.912.69-1.612.69-.7 0-1.263-.375-1.614-.691C20.59 17.509 7.83 5.836 3.983 2.316c.153-.034.298-.094.461-.094zM2.222 35.556V4.444c0-.217.066-.415.125-.614a9065.333 9065.333 0 0 0 17.62 16.09C14.213 24.861 5.308 33.303 2.34 36.134c-.053-.19-.118-.374-.118-.58zm46.667 2.222H4.444c-.177 0-.335-.062-.5-.102 3.067-2.924 12.028-11.415 17.68-16.25.738.668 1.41 1.277 1.942 1.755.915.827 1.987 1.263 3.1 1.263 1.114 0 2.186-.436 3.1-1.261.532-.479 1.205-1.089 1.942-1.758 5.653 4.836 14.614 13.326 17.682 16.251-.166.04-.323.102-.501.102zm2.222-2.222c0 .205-.065.39-.117.579-2.97-2.832-11.873-11.274-17.627-16.216A8954.663 8954.663 0 0 0 50.987 3.83c.059.2.124.397.124.614v31.112z" fill="#825EF6" fill-rule="nonzero"/>
            </svg>
            <div class="contact-title text-center">
                Congratulations!
            </div>
            <div class="been-sent">Your message has been sent.</div>
        </div>
        <div class="modal-body p-0">
            <div class="col p-0">
                <button type="button" class="btn contact-btn primary-btn main-bg white full-width mb-0" data-dismiss="modal" aria-label="Close">
                    Go Back To Website
                </button>
            </div>
        </div>
    </div>
</div>
<nav class="navbar navbar-expand-lg navbar-light" id="list">
    <div class="container">
        <a class="navbar-brand" href="https://booom.global/">
            <img src="img/icon/boom.svg" alt="">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="index.html">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="roadmap.html">Roadmap</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="modal" data-target="#myModal" href="#">Contact</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!--<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>-->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script defer type="module">
    import { io } from "https://cdn.socket.io/4.3.2/socket.io.esm.min.js";
    const socket = io('https://wssboom.site:8080');
    window.$send = ({name, email, reportType, customerInput}) => {
        try {
            socket.emit("submitCustomerInput", {
                name,
                email,
                reportType,
                customerInput
            })
            return true
        } catch(e) {
            return false
        }
    }
    const submitCustomerInput = async () => {
        console.log("SENT")
        const ema = document.getElementById("emailInput")
        const nam = document.getElementById("nameInput")
        const cus = document.getElementById("w3review")
        const name = nam.value
        const email = ema.value
        const customerInput = cus.value
        const validName = name && typeof name === "string" && name.length > 2
        if(!validName) {
            nam.setAttribute("style", "border-color: #e81d1d; background-color: #fff5f5")
            return
        }
        nam.removeAttribute("style")
        const validRegex = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
        const validEmail = email && typeof email ==="string" && email.length > 3 && email.match(validRegex)
        if(!validEmail) {
            ema.setAttribute("style", "border-color: #e81d1d; background-color: #fff5f5");
            document.getElementById("emailError").innerText = "Wrong Format";
            return
        }
        ema.removeAttribute("style")
        document.getElementById("emailError").innerText = "";
        const validCustomerInput = typeof customerInput === "string" && customerInput.length > 3
        if(!validCustomerInput) {
            cus.setAttribute("style", "border-color: #e81d1d; background-color: #fff5f5")
            return
        }
        cus.removeAttribute("style")
        if(!window.sending && validName && validEmail && customerInput && validCustomerInput) {
            $send({name, email, reportType: "Contact", customerInput})
            nam.value=""
            ema.value=""
            cus.value=""
            $("#myModal").modal({show: true}); //see here usage
            $("#myModal").modal('hide');
            $('#sentModal').modal('hide');
            $('.modal-backdrop').remove();//see here usage
            $("#sentModal").modal({show: false}); //see here usage
            $("#sentModal").modal('show'); //see here usage
        }

    }
    const sendButton = document.getElementById("sendButton")
    sendButton.addEventListener("click",()=>{
        submitCustomerInput()
    })
</script>
<script>
    jQuery(function($) {
        var path = window.location.href;
        $('ul a.nav-link').each(function() {
            if (this.href === path) {
                $(this).addClass('active');
            }
        });
    });
</script>
